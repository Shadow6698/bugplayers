-- Bug Player GUI Compacto
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local selectedPlayers = {}
local bugActive = false
local bugConnection

-- Criar GUI compacto
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Parent = ScreenGui
MainFrame.Size = UDim2.new(0, 200, 0, 300) -- menor
MainFrame.Position = UDim2.new(0.05, 0, 0.05, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
MainFrame.Active = true
MainFrame.Draggable = true

local Title = Instance.new("TextLabel")
Title.Parent = MainFrame
Title.Size = UDim2.new(1,0,0,30)
Title.Text = "Bug Player"
Title.BackgroundTransparency = 1
Title.TextScaled = true
Title.TextColor3 = Color3.fromRGB(255,255,255)

local BugButton = Instance.new("TextButton")
BugButton.Parent = MainFrame
BugButton.Size = UDim2.new(1, -10, 0, 30)
BugButton.Position = UDim2.new(0,5,0,260)
BugButton.Text = "ðŸŸ¢ Ativar Bug"
BugButton.BackgroundColor3 = Color3.fromRGB(0,255,0)
BugButton.TextColor3 = Color3.fromRGB(0,0,0)
BugButton.TextScaled = true

local Scroll = Instance.new("ScrollingFrame")
Scroll.Parent = MainFrame
Scroll.Size = UDim2.new(1, -10, 1, -100)
Scroll.Position = UDim2.new(0,5,0,35)
Scroll.BackgroundColor3 = Color3.fromRGB(40,40,40)
Scroll.ScrollBarThickness = 5

local UIList = Instance.new("UIListLayout")
UIList.Parent = Scroll
UIList.Padding = UDim.new(0,3)

-- Criar botÃ£o para cada player
local function createPlayerButton(player)
    local btn = Instance.new("TextButton")
    btn.Parent = Scroll
    btn.Size = UDim2.new(1,0,0,25)
    btn.Text = player.Name
    btn.BackgroundColor3 = Color3.fromRGB(80,80,80)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.TextScaled = true

    btn.MouseButton1Click:Connect(function()
        if selectedPlayers[player.Name] then
            selectedPlayers[player.Name] = nil
            btn.BackgroundColor3 = Color3.fromRGB(80,80,80)
        else
            selectedPlayers[player.Name] = true
            btn.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
        end
    end)
end

for _, p in pairs(Players:GetPlayers()) do
    if p ~= LocalPlayer then
        createPlayerButton(p)
    end
end

Players.PlayerAdded:Connect(function(p)
    if p ~= LocalPlayer then
        createPlayerButton(p)
    end
end)

-- FunÃ§Ã£o bug
local function startBug()
    local Remote = ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Gu1n")
    bugConnection = RunService.Stepped:Connect(function()
        for playerName,_ in pairs(selectedPlayers) do
            local target = Players:FindFirstChild(playerName)
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local crazyVector = Vector3.new(
                    math.random(-1e7, 1e7),
                    math.random(-1e7, 1e7),
                    math.random(-1e7, 1e7)
                )
                local args = {
                    [1] = target.Character.HumanoidRootPart,
                    [2] = target.Character.HumanoidRootPart,
                    [3] = crazyVector,
                    [4] = target.Character.HumanoidRootPart.Position,
                    [5] = LocalPlayer.Backpack:FindFirstChild("Assault") and LocalPlayer.Backpack.Assault.GunScript_Local:FindFirstChild("MuzzleEffect"),
                    [6] = LocalPlayer.Backpack:FindFirstChild("Assault") and LocalPlayer.Backpack.Assault.GunScript_Local:FindFirstChild("HitEffect"),
                    [7] = 10000,
                    [8] = 10000,
                    [9] = { [1] = false },
                    [10] = {
                        [1] = 10000,
                        [2] = Vector3.new(3000, 3000, 3000),
                        [3] = BrickColor.new(29),
                        [4] = 0.05,
                        [5] = Enum.Material.SmoothPlastic,
                        [6] = 0.05
                    },
                    [11] = true,
                    [12] = false
                }
                Remote:FireServer(unpack(args))
            end
        end
    end)
end

-- Ativar/desativar bug
BugButton.MouseButton1Click:Connect(function()
    if bugActive then
        bugActive = false
        BugButton.Text = "ðŸŸ¢ Ativar Bug"
        BugButton.BackgroundColor3 = Color3.fromRGB(0,255,0)
        if bugConnection then
            bugConnection:Disconnect()
        end
    else
        if next(selectedPlayers) == nil then return end
        bugActive = true
        BugButton.Text = "ðŸ”´ Desativar Bug"
        BugButton.BackgroundColor3 = Color3.fromRGB(255,0,0)
        startBug()
    end
end)
