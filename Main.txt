-- Bug Player GUI System com FlingBall (Local Target Version)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Vari√°veis do sistema
local selectedPlayers = {}
local bugPlayerActive = false
local flingBallActive = false
local bugConnection = nil
local flingBallConnections = {}

-- Criar ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BugPlayerGUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Frame principal
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
MainFrame.Size = UDim2.new(0, 320, 0, 500)
MainFrame.Active = true
MainFrame.Draggable = true

-- Adicionar corner ao frame principal
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Header
local Header = Instance.new("Frame")
Header.Name = "Header"
Header.Parent = MainFrame
Header.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Header.BorderSizePixel = 0
Header.Size = UDim2.new(1, 0, 0, 50)

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = Header

-- T√≠tulo
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Header
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 15, 0, 0)
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Font = Enum.Font.GothamBold
Title.Text = "üêõ Bug System + ‚öΩ FlingBall"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Bot√£o fechar
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Parent = Header
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
CloseButton.BorderSizePixel = 0
CloseButton.Position = UDim2.new(1, -40, 0, 10)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "√ó"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextScaled = true

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Status Frame
local StatusFrame = Instance.new("Frame")
StatusFrame.Name = "StatusFrame"
StatusFrame.Parent = MainFrame
StatusFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
StatusFrame.BorderSizePixel = 0
StatusFrame.Position = UDim2.new(0, 10, 0, 60)
StatusFrame.Size = UDim2.new(1, -20, 0, 120)

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 8)
StatusCorner.Parent = StatusFrame

-- Status Label Bug
local BugStatusLabel = Instance.new("TextLabel")
BugStatusLabel.Name = "BugStatusLabel"
BugStatusLabel.Parent = StatusFrame
BugStatusLabel.BackgroundTransparency = 1
BugStatusLabel.Position = UDim2.new(0, 10, 0, 10)
BugStatusLabel.Size = UDim2.new(1, -20, 0, 20)
BugStatusLabel.Font = Enum.Font.Gotham
BugStatusLabel.Text = "Bug Status: ‚ö´ Inativo"
BugStatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
BugStatusLabel.TextScaled = true
BugStatusLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Status Label FlingBall
local FlingBallStatusLabel = Instance.new("TextLabel")
FlingBallStatusLabel.Name = "FlingBallStatusLabel"
FlingBallStatusLabel.Parent = StatusFrame
FlingBallStatusLabel.BackgroundTransparency = 1
FlingBallStatusLabel.Position = UDim2.new(0, 10, 0, 35)
FlingBallStatusLabel.Size = UDim2.new(1, -20, 0, 20)
FlingBallStatusLabel.Font = Enum.Font.Gotham
FlingBallStatusLabel.Text = "FlingBall Status: ‚ö´ Inativo"
FlingBallStatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FlingBallStatusLabel.TextScaled = true
FlingBallStatusLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Selected Count Label
local SelectedLabel = Instance.new("TextLabel")
SelectedLabel.Name = "SelectedLabel"
SelectedLabel.Parent = StatusFrame
SelectedLabel.BackgroundTransparency = 1
SelectedLabel.Position = UDim2.new(0, 10, 0, 60)
SelectedLabel.Size = UDim2.new(1, -20, 0, 20)
SelectedLabel.Font = Enum.Font.Gotham
SelectedLabel.Text = "Players Selecionados: 0"
SelectedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
SelectedLabel.TextScaled = true
SelectedLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Info Label
local InfoLabel = Instance.new("TextLabel")
InfoLabel.Name = "InfoLabel"
InfoLabel.Parent = StatusFrame
InfoLabel.BackgroundTransparency = 1
InfoLabel.Position = UDim2.new(0, 10, 0, 80)
InfoLabel.Size = UDim2.new(1, -20, 0, 15)
InfoLabel.Font = Enum.Font.Gotham
InfoLabel.Text = "üí° Clique nos nicks para selecionar players"
InfoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
InfoLabel.TextScaled = true
InfoLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Bot√µes de controle - Linha 1
local ControlFrame1 = Instance.new("Frame")
ControlFrame1.Name = "ControlFrame1"
ControlFrame1.Parent = MainFrame
ControlFrame1.BackgroundTransparency = 1
ControlFrame1.Position = UDim2.new(0, 10, 0, 190)
ControlFrame1.Size = UDim2.new(1, -20, 0, 50)

-- Bot√£o atualizar
local RefreshButton = Instance.new("TextButton")
RefreshButton.Name = "RefreshButton"
RefreshButton.Parent = ControlFrame1
RefreshButton.BackgroundColor3 = Color3.fromRGB(85, 170, 255)
RefreshButton.BorderSizePixel = 0
RefreshButton.Position = UDim2.new(0, 0, 0, 0)
RefreshButton.Size = UDim2.new(0.48, 0, 1, 0)
RefreshButton.Font = Enum.Font.GothamBold
RefreshButton.Text = "üîÑ Atualizar"
RefreshButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RefreshButton.TextScaled = true

local RefreshCorner = Instance.new("UICorner")
RefreshCorner.CornerRadius = UDim.new(0, 8)
RefreshCorner.Parent = RefreshButton

-- Bot√£o bug player
local BugButton = Instance.new("TextButton")
BugButton.Name = "BugButton"
BugButton.Parent = ControlFrame1
BugButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85)
BugButton.BorderSizePixel = 0
BugButton.Position = UDim2.new(0.52, 0, 0, 0)
BugButton.Size = UDim2.new(0.48, 0, 1, 0)
BugButton.Font = Enum.Font.GothamBold
BugButton.Text = "üü¢ Ativar Bug"
BugButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BugButton.TextScaled = true

local BugCorner = Instance.new("UICorner")
BugCorner.CornerRadius = UDim.new(0, 8)
BugCorner.Parent = BugButton

-- Bot√µes de controle - Linha 2 (FlingBall)
local ControlFrame2 = Instance.new("Frame")
ControlFrame2.Name = "ControlFrame2"
ControlFrame2.Parent = MainFrame
ControlFrame2.BackgroundTransparency = 1
ControlFrame2.Position = UDim2.new(0, 10, 0, 250)
ControlFrame2.Size = UDim2.new(1, -20, 0, 50)

-- Bot√£o FlingBall
local FlingBallButton = Instance.new("TextButton")
FlingBallButton.Name = "FlingBallButton"
FlingBallButton.Parent = ControlFrame2
FlingBallButton.BackgroundColor3 = Color3.fromRGB(255, 170, 85)
FlingBallButton.BorderSizePixel = 0
FlingBallButton.Position = UDim2.new(0, 0, 0, 0)
FlingBallButton.Size = UDim2.new(1, 0, 1, 0)
FlingBallButton.Font = Enum.Font.GothamBold
FlingBallButton.Text = "üü¢ Ativar FlingBall"
FlingBallButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlingBallButton.TextScaled = true

local FlingBallCorner = Instance.new("UICorner")
FlingBallCorner.CornerRadius = UDim.new(0, 8)
FlingBallCorner.Parent = FlingBallButton

-- ScrollFrame para lista de players
local PlayerScrollFrame = Instance.new("ScrollingFrame")
PlayerScrollFrame.Name = "PlayerScrollFrame"
PlayerScrollFrame.Parent = MainFrame
PlayerScrollFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
PlayerScrollFrame.BorderSizePixel = 0
PlayerScrollFrame.Position = UDim2.new(0, 10, 0, 310)
PlayerScrollFrame.Size = UDim2.new(1, -20, 1, -320)
PlayerScrollFrame.ScrollBarThickness = 6
PlayerScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(85, 170, 255)

local ScrollCorner = Instance.new("UICorner")
ScrollCorner.CornerRadius = UDim.new(0, 8)
ScrollCorner.Parent = PlayerScrollFrame

-- Layout para lista de players
local ListLayout = Instance.new("UIListLayout")
ListLayout.Parent = PlayerScrollFrame
ListLayout.SortOrder = Enum.SortOrder.Name
ListLayout.Padding = UDim.new(0, 5)

-- Fun√ß√£o para criar notifica√ß√£o
local function createNotification(title, message, color)
    local NotifGui = Instance.new("ScreenGui")
    NotifGui.Parent = LocalPlayer.PlayerGui
    NotifGui.ResetOnSpawn = false
    
    local NotifFrame = Instance.new("Frame")
    NotifFrame.Parent = NotifGui
    NotifFrame.BackgroundColor3 = color or Color3.fromRGB(40, 40, 40)
    NotifFrame.BorderSizePixel = 0
    NotifFrame.Position = UDim2.new(1, 10, 0, 100)
    NotifFrame.Size = UDim2.new(0, 300, 0, 80)
    
    local NotifCorner = Instance.new("UICorner")
    NotifCorner.CornerRadius = UDim.new(0, 8)
    NotifCorner.Parent = NotifFrame
    
    local NotifTitle = Instance.new("TextLabel")
    NotifTitle.Parent = NotifFrame
    NotifTitle.BackgroundTransparency = 1
    NotifTitle.Position = UDim2.new(0, 10, 0, 5)
    NotifTitle.Size = UDim2.new(1, -20, 0, 25)
    NotifTitle.Font = Enum.Font.GothamBold
    NotifTitle.Text = title
    NotifTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    NotifTitle.TextScaled = true
    NotifTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    local NotifMessage = Instance.new("TextLabel")
    NotifMessage.Parent = NotifFrame
    NotifMessage.BackgroundTransparency = 1
    NotifMessage.Position = UDim2.new(0, 10, 0, 30)
    NotifMessage.Size = UDim2.new(1, -20, 0, 45)
    NotifMessage.Font = Enum.Font.Gotham
    NotifMessage.Text = message
    NotifMessage.TextColor3 = Color3.fromRGB(200, 200, 200)
    NotifMessage.TextScaled = true
    NotifMessage.TextWrapped = true
    NotifMessage.TextXAlignment = Enum.TextXAlignment.Left
    NotifMessage.TextYAlignment = Enum.TextYAlignment.Top
    
    -- Anima√ß√£o de entrada
    local slideIn = TweenService:Create(NotifFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Position = UDim2.new(1, -310, 0, 100)})
    slideIn:Play()
    
    -- Remover ap√≥s 3 segundos
    game:GetService("Debris"):AddItem(NotifGui, 3)
    wait(2.5)
    local slideOut = TweenService:Create(NotifFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {Position = UDim2.new(1, 10, 0, 100)})
    slideOut:Play()
end

-- Fun√ß√£o FlingBall
local function FlingBall(target)
    local players = game:GetService("Players")
    local player = players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local hrp = character:WaitForChild("HumanoidRootPart")
    local backpack = player:WaitForChild("Backpack")
    local ServerBalls = workspace.WorkspaceCom:WaitForChild("001_SoccerBalls")

    local function GetBall()
        if not backpack:FindFirstChild("SoccerBall") then
            game:GetService("ReplicatedStorage").RE:FindFirstChild("1Too1l"):InvokeServer("PickingTools", "SoccerBall")
        end
        repeat task.wait() until backpack:FindFirstChild("SoccerBall")
        backpack.SoccerBall.Parent = character
        repeat task.wait() until ServerBalls:FindFirstChild("Soccer" .. player.Name)
        character.SoccerBall.Parent = backpack
        return ServerBalls:FindFirstChild("Soccer" .. player.Name)
    end

    local Ball = ServerBalls:FindFirstChild("Soccer" .. player.Name) or GetBall()
    Ball.CanCollide = false
    Ball.Massless = true
    Ball.CustomPhysicalProperties = PhysicalProperties.new(0.0001, 0, 0)

    if target ~= player then
        local tchar = target.Character
        if tchar and tchar:FindFirstChild("HumanoidRootPart") and tchar:FindFirstChild("Humanoid") then
            local troot = tchar.HumanoidRootPart
            local thum = tchar.Humanoid

            if Ball:FindFirstChildWhichIsA("BodyVelocity") then
                Ball:FindFirstChildWhichIsA("BodyVelocity"):Destroy()
            end

            local bv = Instance.new("BodyVelocity")
            bv.Name = "FlingPower"
            bv.Velocity = Vector3.new(9e8, 9e8, 9e8)
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bv.P = 9e900
            bv.Parent = Ball

            workspace.CurrentCamera.CameraSubject = thum
            local StartTime = os.time()
            repeat
                if troot.Velocity.Magnitude > 0 then
                    -- C√°lculo da posi√ß√£o ajustada com base na velocidade do alvo
                    local pos_x = troot.Position.X + (troot.Velocity.X / 1.5)
                    local pos_y = troot.Position.Y + (troot.Velocity.Y / 1.5)
                    local pos_z = troot.Position.Z + (troot.Velocity.Z / 1.5)

                    -- Posiciona a bola diretamente na posi√ß√£o ajustada
                    local position = Vector3.new(pos_x, pos_y, pos_z)
                    Ball.CFrame = CFrame.new(position)
                    Ball.Orientation += Vector3.new(45, 60, 30)
                else
                    for i, v in pairs(tchar:GetChildren()) do
                        if v:IsA("BasePart") and v.CanCollide and not v.Anchored then
                            Ball.CFrame = v.CFrame
                            task.wait(1/6000)
                        end
                    end
                end
                task.wait(1/6000)
            until troot.Velocity.Magnitude > 1000 or thum.Health <= 0 or not tchar:IsDescendantOf(workspace) or target.Parent ~= players
            workspace.CurrentCamera.CameraSubject = humanoid
        end
    end
end

-- Fun√ß√£o para alternar FlingBall
local function toggleFlingBall()
    if flingBallActive then
        -- Desativar FlingBall
        for playerName, connectionData in pairs(flingBallConnections) do
            if connectionData.connection then
                connectionData.connection:Disconnect()
            end
        end
        flingBallConnections = {}
        flingBallActive = false
        FlingBallStatusLabel.Text = "FlingBall Status: ‚ö´ Inativo"
        FlingBallButton.Text = "üü¢ Ativar FlingBall"
        FlingBallButton.BackgroundColor3 = Color3.fromRGB(255, 170, 85)
        createNotification("‚öΩ FlingBall Desativado", "O FlingBall foi desativado para todos os players.", Color3.fromRGB(255, 85, 85))
    else
        -- Verificar se h√° players selecionados
        if next(selectedPlayers) == nil then
            createNotification("‚ùå Erro", "Selecione pelo menos um player antes de ativar o FlingBall.", Color3.fromRGB(255, 85, 85))
            return
        end
        
        flingBallActive = true
        FlingBallStatusLabel.Text = "FlingBall Status: üî¥ Ativo"
        FlingBallButton.Text = "üî¥ Desativar FlingBall"
        FlingBallButton.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
        
        local activatedCount = 0
        
        for playerName, _ in pairs(selectedPlayers) do
            local player = Players:FindFirstChild(playerName)
            if player and player.Character then
                -- Criar conex√£o cont√≠nua de FlingBall para este player
                local connection = RunService.Heartbeat:Connect(function()
                    if not flingBallActive then return end
                    pcall(function()
                        FlingBall(player)
                    end)
                    wait(0.1) -- Intervalo entre execu√ß√µes
                end)
                
                flingBallConnections[playerName] = {
                    connection = connection,
                    player = player
                }
                activatedCount = activatedCount + 1
            end
        end
        
        if activatedCount > 0 then
            createNotification("‚öΩ FlingBall Ativado", "FlingBall ativado continuamente para " .. activatedCount .. " player(s)!", Color3.fromRGB(255, 170, 85))
        else
            flingBallActive = false
            FlingBallStatusLabel.Text = "FlingBall Status: ‚ö´ Inativo"
            FlingBallButton.Text = "üü¢ Ativar FlingBall"
            FlingBallButton.BackgroundColor3 = Color3.fromRGB(255, 170, 85)
            createNotification("‚ùå Erro", "Nenhum player v√°lido foi encontrado para FlingBall.", Color3.fromRGB(255, 85, 85))
        end
    end
end

-- Fun√ß√£o para alternar bug player
local function toggleBugPlayer()
    if bugPlayerActive then
        -- Desativar bug
        if bugConnection then
            bugConnection:Disconnect()
            bugConnection = nil
        end
        bugPlayerActive = false
        BugStatusLabel.Text = "Bug Status: ‚ö´ Inativo"
        BugButton.Text = "üü¢ Ativar Bug"
        BugButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85)
        createNotification("üêõ Bug Desativado", "O bug foi desativado para todos os players.", Color3.fromRGB(255, 85, 85))
    else
        -- Verificar se h√° players selecionados
        if next(selectedPlayers) == nil then
            createNotification("‚ùå Erro", "Selecione pelo menos um player antes de ativar o bug.", Color3.fromRGB(255, 85, 85))
            return
        end
        
        bugPlayerActive = true
        BugStatusLabel.Text = "Bug Status: üî¥ Ativo"
        BugButton.Text = "üî¥ Desativar Bug"
        BugButton.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
        
        local Remote = ReplicatedStorage.RE:FindFirstChild("1Gu1n")
        
        if not Remote then
            createNotification("‚ùå Erro", "Remote n√£o encontrado. Certifique-se de estar no jogo correto.", Color3.fromRGB(255, 85, 85))
            bugPlayerActive = false
            BugStatusLabel.Text = "Bug Status: ‚ö´ Inativo"
            BugButton.Text = "üü¢ Ativar Bug"
            BugButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85)
            return
        end
        
        local selectedPlayersList = {}
        for playerName, _ in pairs(selectedPlayers) do
            local player = Players:FindFirstChild(playerName)
            if player then
                table.insert(selectedPlayersList, player)
            end
        end
        
        if #selectedPlayersList == 0 then
            createNotification("‚ùå Erro", "Nenhum dos players selecionados est√° no servidor.", Color3.fromRGB(255, 85, 85))
            bugPlayerActive = false
            BugStatusLabel.Text = "Bug Status: ‚ö´ Inativo"
            BugButton.Text = "üü¢ Ativar Bug"
            BugButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85)
            return
        end
        
          local index = 1
        bugConnection = RunService.Stepped:Connect(function()
            if not bugPlayerActive then return end
            if #selectedPlayersList < 1 then return end
            
            index = index + 1
            if index > #selectedPlayersList then index = 1 end
            local target = selectedPlayersList[index]
            
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local crazyVector = Vector3.new(
                    math.random(1e69, 1e69),
                    math.random(1e69, 1e69),
                    math.random(1e69, 1e69)
                )
                local args = {
                    [1] = target.Character.HumanoidRootPart,
                    [2] = target.Character.HumanoidRootPart,
                    [3] = crazyVector,
                    [4] = target.Character.HumanoidRootPart.Position,
                    [5] = LocalPlayer.Backpack:FindFirstChild("Assault") and LocalPlayer.Backpack.Assault.GunScript_Local:FindFirstChild("MuzzleEffect"),
                    [6] = LocalPlayer.Backpack:FindFirstChild("Assault") and LocalPlayer.Backpack.Assault.GunScript_Local:FindFirstChild("HitEffect"),
                    [7] = 0,
                    [8] = 0,
                    [9] = { [1] = false },
                    [10] = {
                        [1] = 25,
                        [2] = Vector3.new(900, 900, 900),
                        [3] = BrickColor.new(29),
                        [4] = 0.25,
                        [5] = Enum.Material.SmoothPlastic,
                        [6] = 0.25
                    },
                    [11] = true,
                    [12] = false
                }
                Remote:FireServer(unpack(args))
            end
        end)
        
        createNotification(" Bug Ativado", "Bug ativado para " .. #selectedPlayersList .. " player(s) selecionado(s).", Color3.fromRGB(85, 255, 85))
    end
end


-- Fun√ß√£o para atualizar lista de players
local function updatePlayerList()
    -- Limpar lista atual
    for _, child in pairs(PlayerScrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    -- Atualizar contadores
    local selectedCount = 0
    for _ in pairs(selectedPlayers) do
        selectedCount = selectedCount + 1
    end
    SelectedLabel.Text = "Players Selecionados: " .. selectedCount
    
    -- Adicionar players √† lista
    local players = Players:GetPlayers()
    local yPosition = 0
    
    for i, player in pairs(players) do
        if player ~= LocalPlayer then
            local isSelected = selectedPlayers[player.Name] ~= nil
            
            local PlayerButton = Instance.new("TextButton")
            PlayerButton.Name = player.Name
            PlayerButton.Parent = PlayerScrollFrame
            
            -- Cor baseada no status
            if isSelected then
                PlayerButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85) -- Verde para selecionados
            else
                PlayerButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45) -- Cinza para normais
            end
            
            PlayerButton.BorderSizePixel = 0
            PlayerButton.Position = UDim2.new(0, 5, 0, yPosition)
            PlayerButton.Size = UDim2.new(1, -10, 0, 35)
            PlayerButton.Font = Enum.Font.Gotham
            
            -- Texto baseado no status
            local statusIcon = isSelected and "‚úÖ" or "‚≠ï"
            
            PlayerButton.Text = statusIcon .. " " .. player.Name
            PlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            PlayerButton.TextScaled = true
            PlayerButton.TextXAlignment = Enum.TextXAlignment.Left
            
            local PlayerCorner = Instance.new("UICorner")
            PlayerCorner.CornerRadius = UDim.new(0, 6)
            PlayerCorner.Parent = PlayerButton
            
            -- Padding interno
            local PlayerPadding = Instance.new("UIPadding")
            PlayerPadding.PaddingLeft = UDim.new(0, 10)
            PlayerPadding.Parent = PlayerButton
            
            PlayerButton.MouseButton1Click:Connect(function()
                if selectedPlayers[player.Name] then
                    selectedPlayers[player.Name] = nil
                    createNotification("üêõ Player Desmarcado", player.Name .. " foi removido da sele√ß√£o.", Color3.fromRGB(255, 170, 85))
                else
                    selectedPlayers[player.Name] = true
                    createNotification("üêõ Player Selecionado", player.Name .. " foi adicionado √† sele√ß√£o.", Color3.fromRGB(85, 255, 85))
                end
                updatePlayerList()
            end)
            
            yPosition = yPosition + 40
        end
    end
    
    -- Atualizar tamanho do canvas
    PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, yPosition)
    
    if #players <= 1 then
        local NoPlayersLabel = Instance.new("TextLabel")
        NoPlayersLabel.Parent = PlayerScrollFrame
        NoPlayersLabel.BackgroundTransparency = 1
        NoPlayersLabel.Size = UDim2.new(1, 0, 1, 0)
        NoPlayersLabel.Font = Enum.Font.Gotham
        NoPlayersLabel.Text = "Nenhum outro player no servidor"
        NoPlayersLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
        NoPlayersLabel.TextScaled = true
    end
end

-- Conectar eventos
RefreshButton.MouseButton1Click:Connect(function()
    updatePlayerList()
    createNotification("üîÑ Lista Atualizada", "Lista de players foi atualizada!", Color3.fromRGB(85, 170, 255))
end)

BugButton.MouseButton1Click:Connect(toggleBugPlayer)

FlingBallButton.MouseButton1Click:Connect(toggleFlingBall)

CloseButton.MouseButton1Click:Connect(function()
    -- Desativar bug se estiver ativo
    if bugPlayerActive then
        toggleBugPlayer()
    end
    -- Desativar FlingBall se estiver ativo
    if flingBallActive then
        toggleFlingBall()
    end
    ScreenGui:Destroy()
end)

-- Efeitos visuais para bot√µes
local function addButtonEffects(button)
    button.MouseEnter:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {Size = button.Size + UDim2.new(0, 5, 0, 2)})
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {Size = button.Size - UDim2.new(0, 5, 0, 2)})
        tween:Play()
    end)
end

addButtonEffects(RefreshButton)
addButtonEffects(BugButton)
addButtonEffects(FlingBallButton)
addButtonEffects(CloseButton)

-- Limpeza autom√°tica quando players saem do jogo
Players.PlayerRemoving:Connect(function(player)
    if selectedPlayers[player.Name] then
        selectedPlayers[player.Name] = nil
    end
    
    -- Remover conex√£o do FlingBall se existir
    if flingBallConnections[player.Name] then
        if flingBallConnections[player.Name].connection then
            flingBallConnections[player.Name].connection:Disconnect()
        end
        flingBallConnections[player.Name] = nil
    end
    
    updatePlayerList()
end)

-- Anima√ß√£o de entrada da GUI
MainFrame.Position = UDim2.new(0.1, 0, -1, 0)
local slideIn = TweenService:Create(MainFrame, TweenInfo.new(0.7, Enum.EasingStyle.Back), {Position = UDim2.new(0.1, 0, 0.1, 0)})
slideIn:Play()

-- Inicializar
updatePlayerList()
createNotification("üêõ‚öΩ Sistema Carregado", "Bug Player + FlingBall carregados! Selecione players e use as fun√ß√µes.", Color3.fromRGB(85, 170, 255))
